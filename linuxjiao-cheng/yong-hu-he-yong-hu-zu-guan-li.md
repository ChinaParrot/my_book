# 一 、介绍
Linux是个多用户多任务的分时操作系统，所有一个要使用系统资源的用户都必须先向系统管理员申请一个账号，然后以这个账号的身份进入系统。用户的账号一方面能帮助系统管理员对使用系统的用户进行跟踪，并控制他们对系统资源的访问；另一方面也能帮助用户组织文件，并为用户提供安全性保护。每个用户账号都拥有一个惟一的用户名和用户口令。用户在登录时键入正确的用户名和口令后，才能进入系统和自己的主目录。

实现用户账号的管理，要完成的工作主要有如下几个方面：

a.用户账号的添加、删除和修改。

b.用户口令的管理。

c.用户组的管理。

和用户组相关的一些文件：



```
/etc/passwd    root:x:0:0:root:/root:/bin/bash
               用户名:x:uid:gid:描述:HOME:shell
/etc/shadow    root:$1$MYG2NDG6$a1wtyr5GDM2esAPjug0YP0:15636:0:99999:7:::
/etc/group	 root:x:0:root
```

系统约定：
uid: 0     特权用户
uid: 1~499 系统用户
uid: 500+  普通用户

# 二 、用户

## 1.添加用户

useradd 选项 用户名


其中各选项含义如下：

-c comment 指定一段注释性描述。
-d 目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，能创建主目录。
-g 用户组 指定用户所属的用户组。
-G 用户组,用户组 指定用户所属的附加组。
-s Shell文件 指定用户的登录Shell。
-u 用户号 指定用户的用户号，如果同时有-o选项，则能重复使用其他用户的标识号。
-p 这个命令是需求提供md5码的加密口令，普通数字是不行的。
-e 指定过期时间
-M 不创建家目录

## 2、用户组
用户组（group）就是具有相同特征的用户（user）的集合体；比如有时我们要让多个用户具有相同的权限，比如查看、修改某一文件或执行某个命令，这时我们需要用户组，我们把用户都定义到同一用户组，我们通过修改文件或目录的权限，让用户组具有一定的操作权限，这样用户组下的用户对该文件或目录都具有相同的权限，这是我们通过定义组和修改文件的权限来实现的

groupadd命令

groupadd(选项)(参数)

-g：指定新建工作组的id；
-r：创建系统工作组，系统工作组的组ID小于500；
-K：覆盖配置文件“/ect/login.defs”；
-o：允许添加组ID号不唯一的工作组。


groupdel命令用于删除指定的工作组，本命令要修改的系统文件包括/ect/group和/ect/gshadow。若该群组中仍包括某些用户，则必须先删除这些用户后，方能删除群组。



## 3.用户与用户组操作

* **gpasswd**

gpasswd(选项)(参数)

-a：添加用户到组； 
-d：从组删除用户；
-A：指定管理员；
-M：指定组成员(list)；
-r：删除密码；
-R：限制用户登入组，只有组中的成员才可以用newgrp加入该组。

* **usermod**

-c<备注> 　修改用户帐号的备注文字。 
-d登入目录> 　修改用户登入时的目录。 
-e<有效期限> 　修改帐号的有效期限。 
-f<缓冲天数> 　修改在密码过期后多少天即关闭该帐号。 
-g<群组> 　修改用户所属的群组。 
-G<群组> 　修改用户所属的附加群组。 
-l<帐号名称> 　修改用户帐号名称。 
-L 　锁定用户密码，使密码无效。 
-s<shell> 　修改用户登入后所使用的shell。 
-u<uid> 　修改用户ID。 
-U 　解除密码锁定。

* **userdel**

userdel(选项)(参数)
-f：强制删除用户，即使用户当前已登录； 
-r：删除用户的同时，删除与用户相关的所有文件。


* **passwd**

passwd命令用户和工作组管理 passwd命令用于设置用户的认证信息，包括用户密码、密码过期时间等。系统管理者则能用它管理系统用户的密码。只有管理者可以指定用户名称，一般用户只能变更自己的密码。

passwd(选项)(参数)

-d：删除密码，仅有系统管理者才能使用；
-f：强制执行；
-k：设置只有在密码过期失效后，方能更新；
-l：锁住密码；
-S：列出密码的相关信息，仅有系统管理者才能使用；
-u：解开已上锁的帐号。

* **finger**

Linux finger命令可以让使用者查询一些其他使用者的资料。会列出来的资料有：

-l 　多行显示。
-s 　单行显示。这个选项只显示登入名称、真实姓名、终端机名称、闲置时间、登入时间、办公室号码及电话号码。如果所查询的使用者是远端服务器的使用者，这个选项无效。

-m 显示远程用户信息 例如：finger -m root@192.168.1.13

* **id**

id命令可以显示真实有效的用户ID(UID)和组ID(GID)。UID 是对一个用户的单一身份标识。组ID（GID）则对应多个UID。id命令已经默认预装在大多数Linux系统中。要使用它，只需要在你的控制台输入id。不带选项输入id会显示如下。结果会使用活跃用户。

-g或--group 　 显示用户所属群组的ID。
-G或--groups 显示用户所属附加群组的ID。 
-n或--name 　 显示用户，所属群组或附加群组的名称。 
-r或--real 　 显示实际ID。
-u或--user 　 显示用户ID。 
-help 　 显示帮助。
-version 　 显示版本信息。

# 三、 相关配置文件

* /etc/skel 目录
/etc/skel目录一般是存放用户启动文件的目录，这个目录是由root权限控制，当我们添加用户时，这个目录下的文件自动复制到新添加的用户的家目录下；/etc/skel 目录下的文件都是隐藏文件，也就是类似.file格式的；我们可通过修改、添加、删除/etc/skel目录下的文件，来为用户提供一个统一、标准的、默认的用户环境；

* /etc/login.defs 配置文件

/etc/login.defs 文件是当创建用户时的一些规划，比如创建用户时，是否需要家目录，UID和GID的范围；用户的期限等等，这个文件是可以通过root来定义的；



```
# cat /etc/login.defs |grep -v '^#\|^$'
MAIL_DIR	/var/spool/mail #注：创建用户时，要在目录/var/spool/mail中创建一个用户mail文件
PASS_MAX_DAYS	99999      #注：用户的密码不过期最多的天数
PASS_MIN_DAYS	0          #注：密码修改之间最小的天数
PASS_MIN_LEN	5           #注：密码最小长度；
PASS_WARN_AGE	7
UID_MIN			  500    #注：最小UID为500 ，也就是说添加用户时，UID 是从500开始的
UID_MAX			60000
GID_MIN			  500
GID_MAX			60000
CREATE_HOME	yes
UMASK           077
USERGROUPS_ENAB yes
ENCRYPT_METHOD SHA512 

```



